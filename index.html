<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Light Test</title>
<style>
    body {
        margin: 0;
        font-family: monospace;
        display: flex;
        flex-direction: column;
        height: 100vh;
        background: #1e1e1e;
        color: #fff;
        align-items: center;
        padding: 10px;
        gap: 10px;
    }
    button {
        padding: 8px 14px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
    }
    .run-btn { background: #4caf50; color: #fff; }
    .light-btn { background: #ffeb3b; color: #000; }
    iframe {
        width: 80%;
        height: 60%;
        border: 1px solid #000;
        border-radius: 8px;
        background: #fff;
    }
</style>
</head>
<body>

<div>
    <button class="run-btn">Run Shape</button>
    <button class="light-btn">Add Light</button>
</div>

<iframe id="preview"></iframe>

<script>
const preview = document.getElementById('preview');
const runBtn = document.querySelector('.run-btn');
const lightBtn = document.querySelector('.light-btn');

let lightActive = false;

// Run basic shape
runBtn.addEventListener('click', () => {
    const doc = preview.contentDocument || preview.contentWindow.document;
    doc.open();
    doc.write('<div id="shape" style="width:150px;height:150px;background:green;position:absolute;top:100px;left:100px;"></div>');
    doc.close();

    if(lightActive){
        addLight();
    }
});

// Add soft light circle
function addLight() {
    const doc = preview.contentDocument || preview.contentWindow.document;
    const existing = doc.getElementById('light');
    if(existing) existing.remove();

    const lightDiv = doc.createElement('div');
    lightDiv.id = 'light';
    lightDiv.style.width = '200px';
    lightDiv.style.height = '200px';
    lightDiv.style.borderRadius = '50%';
    lightDiv.style.position = 'absolute';
    lightDiv.style.top = '90px';
    lightDiv.style.left = '90px';
    lightDiv.style.background = 'radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.6) 40%, rgba(255,255,0,0.2) 70%, rgba(255,255,0,0) 100%)';
    lightDiv.style.filter = 'blur(15px)';
    lightDiv.style.pointerEvents = 'none';
    lightDiv.style.mixBlendMode = 'screen';

    doc.body.appendChild(lightDiv);
}

// Toggle light on/off
lightBtn.addEventListener('click', () => {
    lightActive = !lightActive;
    addLight();
});
</script>

</body>
</html>
