<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Editor with Graphic Scale Slider</title>
    <style>
        body {
            margin: 0;
            font-family: monospace;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #1e1e1e;
        }

        /* Editor layout */
        .editor {
            display: flex;
            background: #1e1e1e;
            color: #ddd;
            overflow: hidden;
            height: 25vh; /* smaller height for mobile */
        }
        .lines {
            background: #2b2b2b;
            padding: 3px;
            text-align: right;
            color: #777;
            user-select: none;
            font-size: 12px;
        }
        textarea {
            flex: 1;
            background: transparent;
            border: none;
            color: inherit;
            padding: 3px;
            outline: none;
            font-size: 12px;
            line-height: 1.3;
        }

        /* Buttons */
        button {
            padding: 6px 10px;
            margin: 3px;
            cursor: pointer;
            border: none;
            color: white;
            font-size: 12px;
            border-radius: 4px;
            transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
        }

        .run-btn { background: #4caf50; }
        .run-btn:hover { background: #45a049; transform: scale(1.05); box-shadow: 0 0 8px rgba(76, 175, 80, 0.7); }

        .clear-btn { background: #f44336; }
        .clear-btn:hover { background: #da3c30; transform: scale(1.05); box-shadow: 0 0 8px rgba(244, 67, 54, 0.7); }

        #layerBtn, #moveBtn { background: #2196F3; }
        #layerBtn:hover, #moveBtn:hover { background: #1e88e5; transform: scale(1.05); box-shadow: 0 0 8px rgba(33, 150, 243, 0.7); }

        /* Preview iframe */
        iframe {
            width: 100%;
            height: 40vh; /* responsive height */
            border: 1px solid #000;
            margin-top: 5px;
            background: #fff;
            border-radius: 6px;
            box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
        }
        iframe:hover {
            box-shadow: 0 0 15px rgba(0, 255, 204, 0.7);
        }

        /* Layer panel */
        #layerPanel {
            background: #222;
            color: #ddd;
            padding: 8px;
            display: none;
            flex-direction: column;
            gap: 8px;
            position: relative;
            border-radius: 6px;
            max-height: 25vh;
            overflow-y: auto;
        }
        .layerItem {
            border: 1px solid #555;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            border-radius: 4px;
            transition: transform 0.2s ease;
        }
        .layerItem:hover { transform: scale(1.05); }
        .layerItem.selected { outline: 2px solid #ffd700; box-shadow: 0 0 8px rgba(255, 215, 0, 0.7); }

        /* Controls section under layers */
        #layerControlsPanel {
            display: none;
            flex-direction: column;
            gap: 8px;
            padding: 8px;
            background: #333;
            border-radius: 6px;
        }

        /* Slider panel under preview */
        #sliderPanel {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 8px;
            background: #222;
            border-radius: 6px;
            margin-top: 5px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
        }
        .slider-container {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .slider-container label {
            color: #ddd;
            font-size: 12px;
            width: 45px;
        }

        input[type=range] {
            width: 100%;
            height: 20px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #555, #777);
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 30px;
            width: 30px;
            background: #e74c3c;
            border-radius: 50%;
            cursor: pointer;
            margin-top: -5px;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.8), 0 0 15px rgba(231, 76, 60, 0.5);
        }
        input[type=range]::-moz-range-thumb {
            height: 30px;
            width: 30px;
            background: #e74c3c;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.8), 0 0 15px rgba(231, 76, 60, 0.5);
        }

        /* Highlight for selected element in preview */
        .highlight { outline: 2px solid #ff0000; box-shadow: 0 0 8px rgba(255,0,0,0.7); transition: transform 0.3s ease; }

        /* Version number at bottom */
        .bottom-number {
            text-align: center;
            padding: 5px;
            background: #222;
            color: #fff;
            font-size: 18px;
            border-top: 1px solid #444;
        }

    </style>
</head>
<body>

<!-- Buttons -->
<button class="run-btn" onclick="runCode()">Run</button>
<button class="clear-btn" onclick="clearCode()">Clear</button>
<button id="layerBtn">Layer Selection</button>

<!-- Editor -->
<div class="editor">
    <div class="lines" id="lineNumbers">1</div>
    <textarea id="code" oninput="updateLines()" spellcheck="false">// Type HTML, SVG, CSS, JS here
<div style="width:100px;height:100px;background:orange;margin:20px;">Box</div>
<p style="color:blue;font-size:20px;">Hello World</p>
<svg width="100" height="100"><circle cx="50" cy="50" r="40" fill="green"/></svg>
<img src="https://via.placeholder.com/50" />
    </textarea>
</div>

<!-- Preview -->
<iframe id="preview"></iframe>

<!-- Slider panel -->
<div id="sliderPanel">
    <div class="slider-container">
        <label>Scale</label>
        <input type="range" id="slider1" min="0.1" max="3.0" step="0.1" value="">
    </div>
    <div class="slider-container">
        <label>Slider 2</label>
        <input type="range" id="slider2" min="0" max="100" value="">
    </div>
    <div class="slider-container">
        <label>Slider 3</label>
        <input type="range" id="slider3" min="0" max="100" value="">
    </div>
    <div class="slider-container">
        <label>Slider 4</label>
        <input type="range" id="slider4" min="0" max="100" value="">
    </div>
</div>

<!-- Layer panel -->
<div id="layerPanel"></div>

<!-- Move controls -->
<div id="layerControlsPanel">
    <button id="moveBtn">Move</button>
    <div id="moveSliders" style="display:none;">
        <label>X: <input type="range" id="sliderX" min="0" max="300" value="0"></label>
        <label>Y: <input type="range" id="sliderY" min="0" max="300" value="0"></label>
    </div>
</div>

<!-- Version number -->
<div class="bottom-number">5</div>

<script>
// JS remains exactly the same
const codeArea = document.getElementById("code");
const lineNumbers = document.getElementById("lineNumbers");
const preview = document.getElementById("preview");
const layerBtn = document.getElementById('layerBtn');
const layerPanel = document.getElementById('layerPanel');
const layerControlsPanel = document.getElementById('layerControlsPanel');
const moveBtn = document.getElementById('moveBtn');
const moveSliders = document.getElementById('moveSliders');
const sliderX = document.getElementById('sliderX');
const sliderY = document.getElementById('sliderY');
const slider1 = document.getElementById('slider1');

let layerMode = false;
let selectedLayer = null;
let selectedPreviewEl = null;

function updateLines() {
    const code = codeArea.value;
    const lineCount = code.split("\n").length;
    lineNumbers.innerText = Array.from({length: lineCount}, (_, i) => i + 1).join("\n");
}
updateLines();

function runCode() {
    preview.srcdoc = codeArea.value;
    layerPanel.style.display = 'none';
    layerControlsPanel.style.display = 'flex';
    moveSliders.style.display = 'none';
    selectedLayer = null;
    selectedPreviewEl = null;
    slider1.value = '';
