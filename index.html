<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Single Light for Multiple Shapes</title>
<style>
  body {
    margin: 0;
    background: black;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    color: #fff;
    font-family: monospace;
  }
  .controls { margin: 10px; display: flex; gap: 10px; }
  button { padding: 10px; font-size: 14px; cursor: pointer; }

  #preview {
    position: relative;
    width: 400px;
    height: 400px;
    background: black;
    border: 1px solid #333;
    overflow: hidden;
  }

  .shape {
    position: absolute;
  }

  .light {
    position: absolute;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.6) 40%, rgba(255,255,0,0.2) 70%, rgba(255,255,0,0) 100%);
    filter: blur(15px);
    pointer-events: none;
    z-index: 0;
  }
</style>
</head>
<body>

<div class="controls">
  <button id="runBtn">Run Shapes</button>
  <button id="lightBtn">Add/Move Light</button>
  <button onclick="moveLight(0,-10)">↑</button>
  <button onclick="moveLight(0,10)">↓</button>
  <button onclick="moveLight(-10,0)">←</button>
  <button onclick="moveLight(10,0)">→</button>
</div>

<div id="preview"></div>

<script>
const preview = document.getElementById('preview');

let shapes = [];
let light = null;

// Run Shapes
document.getElementById('runBtn').addEventListener('click', () => {
  // Clear previous shapes
  preview.querySelectorAll('.shape').forEach(s => s.remove());
  shapes = [];

  // Example shapes
  const square = document.createElement('div');
  square.className = 'shape';
  square.style.width = '100px';
  square.style.height = '100px';
  square.style.background = 'green';
  square.style.top = '50px';
  square.style.left = '50px';
  preview.appendChild(square);
  shapes.push(square);

  const circle = document.createElement('div');
  circle.className = 'shape';
  circle.style.width = '80px';
  circle.style.height = '80px';
  circle.style.background = 'blue';
  circle.style.borderRadius = '50%';
  circle.style.top = '200px';
  circle.style.left = '150px';
  preview.appendChild(circle);
  shapes.push(circle);
});

// Add Light
document.getElementById('lightBtn').addEventListener('click', () => {
  if (!light) {
    light = document.createElement('div');
    light.className = 'light';
    light.style.top = '100px';
    light.style.left = '100px';
    preview.appendChild(light);

    // Ensure light is below shapes
    preview.querySelectorAll('.shape').forEach(s => s.style.zIndex = 1);
  }
});

// Move light
function moveLight(dx, dy){
  if(!light) return;
  let top = parseInt(light.style.top || 0);
  let left = parseInt(light.style.left || 0);
  light.style.top = (top + dy) + 'px';
  light.style.left = (left + dx) + 'px';
}
</script>

</body>
</html>
