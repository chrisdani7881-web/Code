<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Single Shape Light Demo</title>
<style>
  body {
    margin: 0;
    font-family: monospace;
    background: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }
  .controls { margin-bottom: 10px; display: flex; gap: 5px; }
  button { padding: 8px 14px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }

  .shape-btn { background: #4caf50; color: #fff; }
  .light-btn { background: #ffeb3b; color: #000; }
  .mask-btn { background: #f44336; color: #fff; }

  #preview { width: 400px; height: 400px; background: #000; position: relative; border: 1px solid #555; overflow: hidden; }

  .shape {
    width: 150px;
    height: 150px;
    background: green;
    position: absolute;
    top: 125px;
    left: 125px;
    overflow: hidden;
  }

  .light {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    position: absolute;
    top: -25px;
    left: -25px;
    background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.6) 40%, rgba(255,255,0,0.2) 70%, rgba(255,255,0,0) 100%);
    filter: blur(15px);
  }
</style>
</head>
<body>

<div class="controls">
  <button class="shape-btn">Add Shape</button>
  <button class="light-btn">Add Light</button>
  <button class="mask-btn">Mask Light</button>
</div>

<div id="preview"></div>

<script>
const preview = document.getElementById('preview');
const shapeBtn = document.querySelector('.shape-btn');
const lightBtn = document.querySelector('.light-btn');
const maskBtn = document.querySelector('.mask-btn');

let shapeDiv = null;
let lightDiv = null;

// Add one shape
shapeBtn.addEventListener('click', () => {
    if(shapeDiv) return;
    shapeDiv = document.createElement('div');
    shapeDiv.className = 'shape';
    preview.appendChild(shapeDiv);
});

// Add master light on top of shape
lightBtn.addEventListener('click', () => {
    if(!shapeDiv || lightDiv) return;
    lightDiv = document.createElement('div');
    lightDiv.className = 'light';
    preview.appendChild(lightDiv);
});

// Mask light to shape
maskBtn.addEventListener('click', () => {
    if(!shapeDiv || !lightDiv) return;
    // Clone the light inside the shape with masking
    const maskedLight = lightDiv.cloneNode();
    maskedLight.style.position = 'absolute';
    maskedLight.style.top = lightDiv.offsetTop - shapeDiv.offsetTop + 'px';
    maskedLight.style.left = lightDiv.offsetLeft - shapeDiv.offsetLeft + 'px';
    maskedLight.style.clipPath = 'inset(0% 0% 0% 0%)'; // fully inside shape
    shapeDiv.appendChild(maskedLight);
    // Remove master light
    lightDiv.remove();
    lightDiv = null;
});
</script>

</body>
</html>
